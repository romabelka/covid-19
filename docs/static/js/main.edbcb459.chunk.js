(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{136:function(e,t,a){e.exports=a(251)},251:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(7),o=a.n(l),c=a(60),s=a(113);!function(e){e[e.healthy=0]="healthy",e[e.incubation=1]="incubation",e[e.mild=2]="mild",e[e.severe=3]="severe",e[e.death=4]="death",e[e.healed=5]="healed"}(n||(n={}));var h=a(254),u=a(253),d=function(e){var t=e.data,a=e.totals,n=Math.floor(1e3/t.length),i=t.map((function(e){return{death:e.death/e.total,severe:e.severe/e.total,mild:e.mild/e.total,incubation:e.incubation/e.total,healed:e.healed/e.total,healthy:(e.total-e.death-e.severe-e.mild-e.incubation-e.healed)/e.total,beds:e.hospitalBeds/e.total}})).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("rect",{width:n,height:500*e.death,x:t*n,y:0,fill:"black"}),r.a.createElement("rect",{width:n,height:500*e.healthy,x:t*n,y:500*e.death,fill:"grey"}),r.a.createElement("rect",{width:n,height:500*e.healed,x:t*n,y:500*(e.death+e.healthy),fill:"green"}),r.a.createElement("rect",{width:n,height:500*e.incubation,x:t*n,y:500*(e.death+e.healthy+e.healed),fill:"yellow"}),r.a.createElement("rect",{width:n,height:500*e.mild,x:t*n,y:500*(e.death+e.healthy+e.healed+e.incubation),fill:"orange"}),r.a.createElement("rect",{width:n,height:500*e.severe,x:t*n,y:500*(e.death+e.healthy+e.healed+e.incubation+e.mild),fill:"red"}),r.a.createElement("rect",{width:n,height:2,x:t*n,y:500-500*e.beds,fill:"blue"}))})),l=a.general,o=a.byAge;return r.a.createElement("div",null,r.a.createElement("svg",{width:1e3,height:500},i),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{color:"black"}},"Dead: ",e.dead,",",(100*e.dead/e.infected).toFixed(1),"% Dead/All Cases,",(100*e.dead/(e.healed+e.dead)).toFixed(1),"% Dead/Closed Cases,"),r.a.createElement("h3",{style:{color:"green"}},"Healed: ",e.healed),r.a.createElement("h3",{style:{color:"grey"}},"Not Infected: ",e.total-e.infected,"(",(100*(1-e.infected/e.total)).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"orange"}},"Mild symptoms: ",e.onlyMildSymptoms,"(",(100*e.onlyMildSymptoms/e.infected).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"red"}},"Severe symptoms: ",e.hadSevereSymptoms,"(",(100*e.hadSevereSymptoms/e.infected).toFixed(1),"%); Not hospitalized: ",e.severeNotHospitalized,", (",(100*e.severeNotHospitalized/e.hadSevereSymptoms).toFixed(1),"%);"),r.a.createElement("h3",{style:{color:"yellow"}},"Incubation"),r.a.createElement(u.a,null),r.a.createElement("h3",null,"Total population: ",e.total),r.a.createElement("h3",null,"Total cases: ",e.infected))}(l),function(e){var t=e.map((function(e,t){return{key:t,total:e.total,infected:"".concat(e.infected," (").concat(Math.round(100*e.infected/e.total),"%)"),dead:"".concat(e.dead," (").concat(Math.round(100*e.dead/e.total),"%)"),age:"".concat(10*t,"-").concat(10*t+9),deathRateAll:"".concat((100*e.dead/e.infected).toFixed(1),"%"),deathRateClosed:"".concat((100*e.dead/(e.dead+e.healed)).toFixed(1),"%"),mildOnly:"".concat((100*e.onlyMildSymptoms/e.infected).toFixed(1),"%")}}));return r.a.createElement(h.a,{dataSource:t,columns:[{key:"age",title:"Age Group",dataIndex:"age"},{key:"infected",title:"Infected",dataIndex:"infected"},{key:"dead",title:"Dead",dataIndex:"dead"},{key:"deathRateAll",title:"Mortality, all cases",dataIndex:"deathRateAll"},{key:"deathRateClosed",title:"Mortality, closed cases",dataIndex:"deathRateClosed"},{key:"mildOnly",title:"Mild cases",dataIndex:"mildOnly"}]})}(o))};var f=a(43),m=a(70),g=a(255),v=function(e){var t=e.population,a=e.handlePopulationChange,n=Array(10).fill(0).map((function(e,n){return r.a.createElement("div",{key:n},r.a.createElement("h4",null,"age group: ",10*n,"-",10*n+9),r.a.createElement(g.a,{defaultValue:t[n],min:0,max:1e4,marks:{0:0,1e4:1e4},onAfterChange:function(e){return a(n,e)}}))}));return r.a.createElement("div",null,r.a.createElement("h3",null,"Population:"),n)},y=function(e){var t=e.hospitalBeds,a=e.handleHospitalsChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Hospital beds:"),r.a.createElement(g.a,{defaultValue:t,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return a(e)}}))},p=function(e){var t=e.days,a=e.handleDaysChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Simulation days:"),r.a.createElement(g.a,{defaultValue:t,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return a(e)}}))},S=a(75),E=function(e){var t=e.dirty,a=e.update;return t?r.a.createElement(S.a,{onClick:a,type:"primary"},"Update chart"):null},b=function(e){var t=e.contacts,a=e.handleContactsChange,n=function(e){a(Object(f.a)({},t,{},e))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Quarantine:"),r.a.createElement("h4",null,"Quarantine Days:"),r.a.createElement(g.a,{defaultValue:t.quarantineTime,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return n({quarantineTime:e})}}),r.a.createElement("h4",null,"Quarantine age:"),r.a.createElement(g.a,{defaultValue:t.quarantineAge,min:0,max:100,marks:{0:0,100:100},onAfterChange:function(e){return n({quarantineAge:e})}}),r.a.createElement("h4",null,"Average Contacts:"),r.a.createElement(g.a,{defaultValue:t.avContactsGeneral,min:0,max:20,marks:{0:0,20:20},onAfterChange:function(e){return n({avContactsGeneral:e})}}),r.a.createElement("h4",null,"Contacts Quarantined:"),r.a.createElement(g.a,{defaultValue:t.avContactsQuarantine,min:0,max:20,marks:{0:0,20:20},onAfterChange:function(e){return n({avContactsQuarantine:e})}}))},C=function(e){var t=e.simulationData,a=e.setSimulationData,n=e.dirty,i=e.update;return r.a.createElement("div",{style:{width:"100%",padding:"0 30px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h2",null,"Controls"),r.a.createElement(E,{dirty:n,update:i})),r.a.createElement(y,{hospitalBeds:t.hospitalBeds,handleHospitalsChange:function(e){return a(Object(f.a)({},t,{hospitalBeds:e}))}}),r.a.createElement(u.a,null),r.a.createElement(p,{handleDaysChange:function(e){return a(Object(f.a)({},t,{days:e}))},days:t.days}),r.a.createElement(u.a,null),r.a.createElement(b,{handleContactsChange:function(e){return a(Object(f.a)({},t,{socialContacts:e}))},contacts:t.socialContacts}),r.a.createElement(u.a,null),r.a.createElement(v,{population:t.infectedPopulation,handlePopulationChange:function(e,n){var i=Object(m.a)(t.infectedPopulation);i[e]=n,a(Object(f.a)({},t,{infectedPopulation:i}))}}))},x=a(50),D=a(256),k=function e(t){var a=this;Object(x.a)(this,e),this.id=void 0,this.age=void 0,this.immune=!1,this.infected=!1,this.hospitalized=!1,this.severeNotHospitalized=!1,this.infectionDay=0,this.currentStageDay=0,this.infectionsStage=n.healthy,this.nextStage=n.incubation,this.history=new Map,this.nextDay=function(){a.infected&&(a.infectionDay++,a.currentStageDay++)},this.setStage=function(e){a.history.set(a.infectionsStage,a.currentStageDay),a.currentStageDay=0,a.infectionsStage=e},this.heal=function(){a.setStage(n.healed),a.immune=!0,a.infected=!1,a.hospitalized=!1},this.infect=function(){a.immune||a.infected||(a.infected=!0,a.infectionsStage=n.incubation,a.nextStage=n.mild,a.infectionDay=0,a.currentStageDay=0)},this.id=D.a(),this.age=t.age,Object.assign(this,t),this.infectionsStage===n.incubation&&(this.nextStage=n.mild)},O=a(133);function j(e,t){var a=1.05*e;return t<a?Math.exp(t-a):1}function w(e){return Math.random()<e}function A(e,t){for(var a=new Set;a.size<t;)a.add(Math.floor(Math.random()*e.length));return Object(m.a)(a).map((function(t){return e[t]}))}var M=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z;Object(x.a)(this,e),this.characteristics=void 0,this.transmissionChance=function(){return t.characteristics.transmissionChance},this.severeStateChance=function(e){return e.infected&&e.infectionsStage===n.mild&&e.nextStage===n.severe?j(t.characteristics.averageMildToSevereDays,e.currentStageDay):0},this.deathChance=function(e){return e.infected&&e.infectionsStage===n.severe&&e.nextStage===n.death?j(t.characteristics.averageSevereToDeathDays,e.currentStageDay):0},this.recoverChance=function(e){return e.infected?e.infectionsStage===n.incubation?0:e.infectionsStage===n.mild?e.nextStage===n.healed?j(t.characteristics.averageMildToHealDays,e.currentStageDay):0:e.infectionsStage===n.severe?e.nextStage===n.healed?j(t.characteristics.averageSevereToHealDays,e.currentStageDay):0:1:1},this.symptomsStartChance=function(e){return e.infected&&e.infectionsStage===n.incubation?j(t.characteristics.averageIncubationDays,e.infectionDay):0},this.getNextStage=function(e){return e.infectionsStage===n.incubation?n.mild:e.infectionsStage===n.mild?w(t.characteristics.ageSevereChance[Math.floor(e.age/10)])?n.severe:n.healed:e.infectionsStage===n.severe?w((e.hospitalized?t.characteristics.ageDeathChance.hospitalized:t.characteristics.ageDeathChance.home)[Math.floor(e.age/10)])?n.death:n.healed:n.death},this.characteristics=a},z={transmissionChance:.01,averageIncubationDays:10,averageMildToHealDays:14,averageMildToSevereDays:7,averageSevereToHealDays:21,averageSevereToDeathDays:5,ageSevereChance:[.01,.03,.03,.03,.06,.14,.32,.5,.65,.7],ageDeathChance:{hospitalized:[.1,.15,.15,.15,.2,.25,.33,.45,.65,.7],home:[.1,.25,.25,.25,.35,.4,.5,.75,.9,.95]}},I={avContactsGeneral:10,avContactsQuarantine:1,quarantineTime:60,quarantineAge:0},T=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new M,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;Object(x.a)(this,e),this.hospitalBeds=0,this.population=void 0,this.virus=void 0,this.day=0,this.socialContacts=I,this.nextDay=function(){t.day++,t.progressInfection(),t.progressSpread()},this.run=function(e){for(var a=[],i=0;i<e;i++){t.nextDay();for(var r=0,l=0,o=0,c=0,s=0,h=n.incubation,u=n.mild,d=n.severe,f=n.death,m=n.healed,g=0,v=t.population,y=v.length;g<y;g++)switch(v[g].infectionsStage){case h:r++;break;case u:l++;break;case d:o++;break;case f:c++;break;case m:s++}a.push({total:t.population.length,incubation:r,mild:l,severe:o,death:c,healed:s,hospitalBeds:t.hospitalBeds})}return a},this.population=a,this.virus=i,this.hospitalBeds=r,this.socialContacts=l}return Object(O.a)(e,[{key:"progressInfection",value:function(){for(var e=this.population.filter((function(e){return e.hospitalized})).length,t=0;t<this.population.length;t++){var a=this.population[t];if(a.infected)switch(a.nextDay(),a.infectionsStage){case n.incubation:w(this.virus.symptomsStartChance(a))&&(a.setStage(n.mild),a.nextStage=this.virus.getNextStage(a));break;case n.mild:var i=this.virus.severeStateChance(a),r=this.virus.recoverChance(a);w(i)?(a.setStage(n.severe),e<=this.hospitalBeds?(a.hospitalized=!0,e++):a.severeNotHospitalized=!0,a.nextStage=this.virus.getNextStage(a)):w(r)&&a.heal();break;case n.severe:var l=this.virus.deathChance(a),o=this.virus.recoverChance(a);w(l)?(a.setStage(n.death),a.hospitalized=!1):w(o)&&a.heal()}}}},{key:"progressSpread",value:function(){for(var e=this,t=this.socialContacts,a=t.quarantineAge,i=t.avContactsGeneral,r=t.avContactsQuarantine,l=t.quarantineTime,o=this.population.filter((function(e){return e.infectionsStage!==n.death})),c=function(t){var n=e.population[t],c=e.day<l&&n.age>=a?r:i;A(o,c).forEach((function(t){return t.infected&&w(e.virus.transmissionChance())&&n.infect()}))},s=0;s<this.population.length;s++)c(s)}}]),e}(),H={position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",zIndex:999},B=function(e){return e.active?r.a.createElement("div",{style:H},r.a.createElement("h2",{style:{color:"#fff"}},"Running Simulation, it can take a while...")):null},N={infectedPopulation:[4333,3982,5086,6922,5977,5854,5182,2857,1e3,787],hospitalBeds:150,days:700,socialContacts:{avContactsQuarantine:1,avContactsGeneral:7,quarantineAge:60,quarantineTime:365}},F=function(e){Object(s.a)(e);var t=Object(i.useState)(!0),a=Object(c.a)(t,2),n=a[0],l=a[1],o=Object(i.useState)(N),h=Object(c.a)(o,2),u=h[0],f=h[1],m=Object(i.useRef)(u),g=Object(i.useState)(null),v=Object(c.a)(g,2),y=v[0],p=v[1],S=Object(i.useState)(null),E=Object(c.a)(S,2),b=E[0],x=E[1];Object(i.useLayoutEffect)((function(){n&&setTimeout((function(){var e=u.infectedPopulation.flatMap((function(e,t){return Array(e).fill(10*t+5).map((function(e){return new k({age:e})}))}));A(e,100).forEach((function(e){return e.infect()}));var t=new T(e,new M,u.hospitalBeds,u.socialContacts);window.simulation=t;var a=t.run(u.days),n={general:q(t.population),byAge:Array(10).fill(0).map((function(e,a){return q(t.population.filter((function(e){return e.age>=10*a&&e.age<10*(a+1)})))}))};l(!1),p(a),x(n),m.current=u}))}),[n]);var D=u!==m.current;return r.a.createElement("div",null,r.a.createElement(B,{active:n}),r.a.createElement("h1",null,"Naive Infection Distribution"),r.a.createElement("div",{style:{display:"flex"}},y&&b&&r.a.createElement(d,{data:y,totals:b}),r.a.createElement(C,{update:function(){return l(!0)},dirty:D,simulationData:u,setSimulationData:f})))};function q(e){var t=e.filter((function(e){return e.infectionsStage!==n.healthy}));return{total:e.length,dead:e.filter((function(e){return e.infectionsStage===n.death})).length,infected:t.length,healed:e.filter((function(e){return e.infectionsStage===n.healed})).length,onlyMildSymptoms:t.filter((function(e){return e.history.has(n.incubation)&&!e.history.get(n.severe)})).length,hadSevereSymptoms:t.filter((function(e){return e.history.has(n.severe)||e.infectionsStage===n.severe})).length,severeNotHospitalized:t.filter((function(e){return e.severeNotHospitalized})).length}}var Q=function(){return r.a.createElement("div",null,r.a.createElement(F,null))};a(250);o.a.render(r.a.createElement(Q,null),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.edbcb459.chunk.js.map