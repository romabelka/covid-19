(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{130:function(e,t,a){e.exports=a(245)},245:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(7),o=a.n(l),c=a(129),s=a(106);!function(e){e[e.healthy=0]="healthy",e[e.incubation=1]="incubation",e[e.mild=2]="mild",e[e.severe=3]="severe",e[e.death=4]="death",e[e.healed=5]="healed"}(n||(n={}));var h=a(248),d=a(247),u=function(e){var t=e.data,a=e.totals,n=Math.floor(1e3/t.length),i=t.map((function(e){return{death:e.death/e.total,severe:e.severe/e.total,mild:e.mild/e.total,incubation:e.incubation/e.total,healed:e.healed/e.total,healthy:(e.total-e.death-e.severe-e.mild-e.incubation-e.healed)/e.total,beds:e.hospitalBeds/e.total}})).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("rect",{width:n,height:500*e.death,x:t*n,y:0,fill:"black"}),r.a.createElement("rect",{width:n,height:500*e.healthy,x:t*n,y:500*e.death,fill:"grey"}),r.a.createElement("rect",{width:n,height:500*e.healed,x:t*n,y:500*(e.death+e.healthy),fill:"green"}),r.a.createElement("rect",{width:n,height:500*e.incubation,x:t*n,y:500*(e.death+e.healthy+e.healed),fill:"yellow"}),r.a.createElement("rect",{width:n,height:500*e.mild,x:t*n,y:500*(e.death+e.healthy+e.healed+e.incubation),fill:"orange"}),r.a.createElement("rect",{width:n,height:500*e.severe,x:t*n,y:500*(e.death+e.healthy+e.healed+e.incubation+e.mild),fill:"red"}),r.a.createElement("rect",{width:n,height:2,x:t*n,y:500-500*e.beds,fill:"blue"}))})),l=a.general,o=a.byAge;return r.a.createElement("div",null,r.a.createElement("svg",{width:1e3,height:500},i),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{color:"black"}},"Dead: ",e.dead,",",(100*e.dead/e.infected).toFixed(1),"% Dead/All Cases,",(100*e.dead/(e.healed+e.dead)).toFixed(1),"% Dead/Closed Cases,"),r.a.createElement("h3",{style:{color:"green"}},"Healed: ",e.healed),r.a.createElement("h3",{style:{color:"grey"}},"Not Infected: ",e.total-e.infected,"(",(100*(1-e.infected/e.total)).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"orange"}},"Mild symptoms: ",e.onlyMildSymptoms,"(",(100*e.onlyMildSymptoms/e.infected).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"red"}},"Severe symptoms: ",e.hadSevereSymptoms,"(",(100*e.hadSevereSymptoms/e.infected).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"yellow"}},"Incubation"),r.a.createElement(d.a,null),r.a.createElement("h3",null,"Total population: ",e.total),r.a.createElement("h3",null,"Total cases: ",e.infected))}(l),function(e){var t=e.map((function(e,t){return{key:t,total:e.total,infected:e.infected,age:"".concat(10*t,"-").concat(10*t+9),deathRateAll:"".concat((100*e.dead/e.infected).toFixed(1),"%"),deathRateClosed:"".concat((100*e.dead/(e.dead+e.healed)).toFixed(1),"%"),mildOnly:"".concat((100*e.onlyMildSymptoms/e.infected).toFixed(1),"%")}}));return r.a.createElement(h.a,{dataSource:t,columns:[{key:"age",title:"Age Group",dataIndex:"age"},{key:"infected",title:"Infected",dataIndex:"infected"},{key:"deathRateAll",title:"Mortality, all cases",dataIndex:"deathRateAll"},{key:"deathRateClosed",title:"Mortality, closed cases",dataIndex:"deathRateClosed"},{key:"mildOnly",title:"Mild cases",dataIndex:"mildOnly"}]})}(o))};var f=a(54),g=a(64),m=a(249),v=function(e){var t=e.population,a=e.handlePopulationChange,n=Array(10).fill(0).map((function(e,n){return r.a.createElement("div",{key:n},r.a.createElement("h4",null,"age group: ",10*n,"-",10*n+9),r.a.createElement(m.a,{defaultValue:t[n],min:0,max:1e4,marks:{0:0,1e4:1e4},onAfterChange:function(e){return a(n,e)}}))}));return r.a.createElement("div",null,r.a.createElement("h3",null,"Population:"),n)},y=function(e){var t=e.hospitalBeds,a=e.handleHospitalsChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Hospital beds:"),r.a.createElement(m.a,{defaultValue:t,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return a(e)}}))},p=function(e){var t=e.days,a=e.handleDaysChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Simulation days:"),r.a.createElement(m.a,{defaultValue:t,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return a(e)}}))},S=function(e){var t=e.contacts,a=e.handleContactsChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Average daily contacts:"),r.a.createElement(m.a,{defaultValue:t,min:0,max:20,marks:{0:0,20:20},onAfterChange:function(e){return a(e)}}))},E=function(e){var t=e.simulationData,a=e.setSimulationData;return r.a.createElement("div",{style:{width:"100%",padding:"0 30px"}},r.a.createElement("h2",null,"Controls"),r.a.createElement(y,{hospitalBeds:t.hospitalBeds,handleHospitalsChange:function(e){return a(Object(f.a)({},t,{hospitalBeds:e}))}}),r.a.createElement(d.a,null),r.a.createElement(p,{handleDaysChange:function(e){return a(Object(f.a)({},t,{days:e}))},days:t.days}),r.a.createElement(d.a,null),r.a.createElement(S,{handleContactsChange:function(e){return a(Object(f.a)({},t,{socialContacts:e}))},contacts:t.socialContacts}),r.a.createElement(d.a,null),r.a.createElement(v,{population:t.infectedPopulation,handlePopulationChange:function(e,n){var i=Object(g.a)(t.infectedPopulation);i[e]=n,a(Object(f.a)({},t,{infectedPopulation:i}))}}))},b=a(44),C=a(250),x=function e(t){var a=this;Object(b.a)(this,e),this.id=void 0,this.age=void 0,this.immune=!1,this.infected=!1,this.hospitalized=!1,this.infectionDay=0,this.currentStageDay=0,this.infectionsStage=n.healthy,this.nextStage=n.incubation,this.history=new Map,this.nextDay=function(){a.infected&&(a.infectionDay++,a.currentStageDay++)},this.setStage=function(e){a.history.set(a.infectionsStage,a.currentStageDay),a.currentStageDay=0,a.infectionsStage=e},this.heal=function(){a.setStage(n.healed),a.immune=!0,a.infected=!1,a.hospitalized=!1},this.infect=function(){a.immune||a.infected||(a.infected=!0,a.infectionsStage=n.incubation,a.nextStage=n.mild,a.infectionDay=0,a.currentStageDay=0)},this.id=C.a(),this.age=t.age,Object.assign(this,t),this.infectionsStage===n.incubation&&(this.nextStage=n.mild)},D=a(126);function M(e,t){var a=1.05*e;return t<a?Math.exp(t-a):1}function k(e){return Math.random()<e}function w(e,t){for(var a=new Set;a.size<t;)a.add(Math.floor(Math.random()*e.length));return Object(g.a)(a).map((function(t){return e[t]}))}var O=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;Object(b.a)(this,e),this.characteristics=void 0,this.transmissionChance=function(){return t.characteristics.transmissionChance},this.severeStateChance=function(e){return e.infected&&e.infectionsStage===n.mild&&e.nextStage===n.severe?M(t.characteristics.averageMildToSevereDays,e.currentStageDay):0},this.deathChance=function(e){return e.infected&&e.infectionsStage===n.severe&&e.nextStage===n.death?M(t.characteristics.averageSevereToDeathDays,e.currentStageDay):0},this.recoverChance=function(e){return e.infected?e.infectionsStage===n.incubation?0:e.infectionsStage===n.mild?e.nextStage===n.healed?M(t.characteristics.averageMildToHealDays,e.currentStageDay):0:e.infectionsStage===n.severe?e.nextStage===n.healed?M(t.characteristics.averageSevereToHealDays,e.currentStageDay):0:1:1},this.symptomsStartChance=function(e){return e.infected&&e.infectionsStage===n.incubation?M(t.characteristics.averageIncubationDays,e.infectionDay):0},this.getNextStage=function(e){return e.infectionsStage===n.incubation?n.mild:e.infectionsStage===n.mild?k(t.characteristics.ageSevereChance[Math.floor(e.age/10)])?n.severe:n.healed:e.infectionsStage===n.severe?k((e.hospitalized?t.characteristics.ageDeathChance.hospitalized:t.characteristics.ageDeathChance.home)[Math.floor(e.age/10)])?n.death:n.healed:n.death},this.characteristics=a},A={transmissionChance:.01,averageIncubationDays:10,averageMildToHealDays:14,averageMildToSevereDays:7,averageSevereToHealDays:21,averageSevereToDeathDays:5,ageSevereChance:[.01,.03,.03,.03,.06,.14,.32,.5,.65,.7],ageDeathChance:{hospitalized:[.1,.15,.15,.15,.2,.25,.33,.45,.65,.7],home:[.1,.25,.25,.25,.35,.4,.5,.65,.9,.95]}},j=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new O,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(b.a)(this,e),this.hospitalBeds=0,this.population=void 0,this.virus=void 0,this.day=0,this.averageSocialContacts=1,this.nextDay=function(){t.day++,t.progressInfection(),t.progressSpread()},this.run=function(e){for(var a=[],i=0;i<e;i++)t.nextDay(),a.push({total:t.population.length,incubation:t.population.filter((function(e){return e.infectionsStage===n.incubation})).length,mild:t.population.filter((function(e){return e.infectionsStage===n.mild})).length,severe:t.population.filter((function(e){return e.infectionsStage===n.severe})).length,death:t.population.filter((function(e){return e.infectionsStage===n.death})).length,healed:t.population.filter((function(e){return e.infectionsStage===n.healed})).length,hospitalBeds:t.hospitalBeds});return a},this.population=a,this.virus=i,this.hospitalBeds=r,this.averageSocialContacts=l}return Object(D.a)(e,[{key:"progressInfection",value:function(){var e=this;this.population.forEach((function(t){if(t.infected)switch(t.nextDay(),t.infectionsStage){case n.incubation:k(e.virus.symptomsStartChance(t))&&(t.setStage(n.mild),t.nextStage=e.virus.getNextStage(t));break;case n.mild:var a=e.virus.severeStateChance(t),i=e.virus.recoverChance(t);if(k(a)){t.setStage(n.severe);var r=e.population.filter((function(e){return e.hospitalized})).length;t.hospitalized=r<e.hospitalBeds,t.nextStage=e.virus.getNextStage(t)}else k(i)&&t.heal();break;case n.severe:var l=e.virus.deathChance(t),o=e.virus.recoverChance(t);k(l)?t.setStage(n.death):k(o)&&t.heal()}}))}},{key:"progressSpread",value:function(){var e=this;this.population.filter((function(e){return e.infected})).forEach((function(){w(e.population,e.averageSocialContacts).forEach((function(t){return k(e.virus.transmissionChance())&&t.infect()}))}))}}]),e}(),I={infectedPopulation:[4333,3982,5086,6922,5977,5854,5182,2857,1e3,787],hospitalBeds:1e3,days:200,socialContacts:5},B=function(e){Object(s.a)(e);var t=Object(i.useState)(I),a=Object(c.a)(t,2),n=a[0],l=a[1],o=n.infectedPopulation.flatMap((function(e,t){return Array(e).fill(10*t+5).map((function(e){return new x({age:e})}))}));w(o,100).forEach((function(e){return e.infect()}));var h=new j(o,new O,n.hospitalBeds,n.socialContacts),d=h.run(n.days),f={general:F(h.population),byAge:Array(10).fill(0).map((function(e,t){return F(h.population.filter((function(e){return e.age>=10*t&&e.age<10*(t+1)})))}))};return r.a.createElement("div",null,r.a.createElement("h1",null,"Naive Infection Distribution"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(u,{data:d,totals:f}),r.a.createElement(E,{simulationData:n,setSimulationData:l})))};function F(e){var t=e.filter((function(e){return e.infectionsStage!==n.healthy}));return{total:e.length,dead:e.filter((function(e){return e.infectionsStage===n.death})).length,infected:t.length,healed:e.filter((function(e){return e.infectionsStage===n.healed})).length,onlyMildSymptoms:t.filter((function(e){return e.history.has(n.incubation)&&!e.history.get(n.severe)})).length,hadSevereSymptoms:t.filter((function(e){return e.history.has(n.severe)||e.infectionsStage===n.severe})).length}}var T=function(){return r.a.createElement("div",null,r.a.createElement(B,null))};a(244);o.a.render(r.a.createElement(T,null),document.getElementById("root"))}},[[130,1,2]]]);
//# sourceMappingURL=main.b84c2e37.chunk.js.map