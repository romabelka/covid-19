(this.webpackJsonpcovid19=this.webpackJsonpcovid19||[]).push([[0],{136:function(e,t,a){e.exports=a(251)},251:function(e,t,a){"use strict";a.r(t);var n,i=a(0),r=a.n(i),l=a(7),o=a.n(l),c=a(62);!function(e){e[e.healthy=0]="healthy",e[e.incubation=1]="incubation",e[e.mild=2]="mild",e[e.severe=3]="severe",e[e.death=4]="death",e[e.healed=5]="healed"}(n||(n={}));var s=a(254),h=a(253),u=function(e){var t=e.data,a=e.totals,n=e.quarantineTime,i=Math.floor(1e3/t.length),l=t.map((function(e){return{death:e.death/e.total,severe:e.severe/e.total,mild:e.mild/e.total,incubation:e.incubation/e.total,healed:e.healed/e.total,healthy:(e.total-e.death-e.severe-e.mild-e.incubation-e.healed)/e.total,beds:e.hospitalBeds/e.total}})).map((function(e,t){return r.a.createElement(r.a.Fragment,{key:t},r.a.createElement("rect",{width:i,height:500*e.death,x:t*i,y:0,fill:"black"}),r.a.createElement("rect",{width:i,height:500*e.healthy,x:t*i,y:500*e.death,fill:"grey"}),r.a.createElement("rect",{width:i,height:500*e.healed,x:t*i,y:500*(e.death+e.healthy),fill:"green"}),r.a.createElement("rect",{width:i,height:500*e.incubation,x:t*i,y:500*(e.death+e.healthy+e.healed),fill:"yellow"}),r.a.createElement("rect",{width:i,height:500*e.mild,x:t*i,y:500*(e.death+e.healthy+e.healed+e.incubation),fill:"orange"}),r.a.createElement("rect",{width:i,height:500*e.severe,x:t*i,y:500*(e.death+e.healthy+e.healed+e.incubation+e.mild),fill:"red"}),r.a.createElement("rect",{width:i,height:2,x:t*i,y:500-500*e.beds,fill:"blue"}),r.a.createElement("rect",{width:1,height:500,x:n*i,y:0,fill:"black"}))})),o=a.general,c=a.byAge;return r.a.createElement("div",null,r.a.createElement("svg",{width:1e3,height:500},l),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{style:{color:"black"}},"Dead: ",100*e.dead,",",(100*e.dead/e.infected).toFixed(1),"% Dead/All Cases,",(100*e.dead/(e.healed+e.dead)).toFixed(1),"% Dead/Closed Cases, R0: ",e.R0.toFixed(2)),r.a.createElement("h3",{style:{color:"green"}},"Healed: ",100*e.healed),r.a.createElement("h3",{style:{color:"grey"}},"Infected: ",100*e.infected,"(",(e.infected/e.total*100).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"orange"}},"Mild symptoms: ",100*e.onlyMildSymptoms,"(",(100*e.onlyMildSymptoms/e.infected).toFixed(1),"%)"),r.a.createElement("h3",{style:{color:"red"}},"Severe symptoms: ",100*e.hadSevereSymptoms,"(",(100*e.hadSevereSymptoms/e.infected).toFixed(1),"%); Not hospitalized: ",100*e.severeNotHospitalized,", (",(100*e.severeNotHospitalized/e.hadSevereSymptoms).toFixed(1),"%);"),r.a.createElement("h3",{style:{color:"yellow"}},"Incubation"),r.a.createElement(h.a,null),r.a.createElement("h3",null,"Total population: ",100*e.total),r.a.createElement("h3",null,"Total cases: ",100*e.infected))}(o),function(e){var t=e.map((function(e,t){return{key:t,total:100*e.total,infected:"".concat(100*e.infected," (").concat(Math.round(100*e.infected/e.total),"%)"),dead:"".concat(100*e.dead," (").concat(Math.round(100*e.dead/e.total),"%)"),age:"".concat(10*t,"-").concat(10*t+9),deathRateAll:"".concat((100*e.dead/e.infected).toFixed(1),"%"),deathRateClosed:"".concat((100*e.dead/(e.dead+e.healed)).toFixed(1),"%"),mildOnly:"".concat((100*e.onlyMildSymptoms/e.infected).toFixed(1),"%")}}));return r.a.createElement(s.a,{dataSource:t,columns:[{key:"age",title:"Age Group",dataIndex:"age"},{key:"infected",title:"Infected",dataIndex:"infected"},{key:"dead",title:"Dead",dataIndex:"dead"},{key:"deathRateAll",title:"Mortality, all cases",dataIndex:"deathRateAll"},{key:"deathRateClosed",title:"Mortality, closed cases",dataIndex:"deathRateClosed"},{key:"mildOnly",title:"Mild cases",dataIndex:"mildOnly"}]})}(c))};var d=a(36),f=a(52),m=a(20),g=a(255),v=function(e){var t=e.population,a=e.handlePopulationChange,n=Array(10).fill(0).map((function(e,n){return r.a.createElement("div",{key:n},r.a.createElement("h4",null,"age group: ",10*n,"-",10*n+9),r.a.createElement(g.a,{defaultValue:100*t[n],min:0,max:1e6,marks:Object(m.a)({0:0},1e6,1e6),step:100,onAfterChange:function(e){return a(n,Math.round(e/100))},tooltipVisible:!0}))}));return r.a.createElement("div",null,r.a.createElement("h3",null,"Population:"),n)},p=function(e){var t=e.hospitalBeds,a=e.handleHospitalsChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Hospital beds:"),r.a.createElement(g.a,{defaultValue:100*t,min:0,max:1e5,step:100,marks:Object(m.a)({0:0},1e5,1e5),onAfterChange:function(e){return a(Math.round(e/100))},tooltipVisible:!0}))},y=function(e){var t=e.days,a=e.handleDaysChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Simulation days:"),r.a.createElement(g.a,{defaultValue:t,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return a(e)},tooltipVisible:!0}))},S=a(76),b=function(e){var t=e.update;return r.a.createElement(S.a,{onClick:t,type:"primary"},"Run Simulation")},E=function(e){var t=e.contacts,a=e.handleContactsChange,n=function(e){a(Object(d.a)({},t,{},e))};return r.a.createElement("div",null,r.a.createElement("h2",null,"Quarantine:"),r.a.createElement("h4",null,"Quarantine Days:"),r.a.createElement(g.a,{defaultValue:t.quarantineTime,min:0,max:1e3,marks:{0:0,1e3:1e3},onAfterChange:function(e){return n({quarantineTime:e})},tooltipVisible:!0}),r.a.createElement("h4",null,"Quarantine age:"),r.a.createElement(g.a,{defaultValue:t.quarantineAge,min:0,max:100,marks:{0:0,100:100},onAfterChange:function(e){return n({quarantineAge:e})},tooltipVisible:!0}),r.a.createElement("h4",null,"Average Contacts:"),r.a.createElement(g.a,{defaultValue:10*t.avContactsGeneral,min:0,max:400,marks:Object(m.a)({0:0},400,400),step:10,onAfterChange:function(e){return n({avContactsGeneral:Math.round(e/10)})},tooltipVisible:!0}),r.a.createElement("h4",null,"Contacts Quarantined:"),r.a.createElement(g.a,{defaultValue:10*t.avContactsQuarantine,min:0,max:400,marks:Object(m.a)({0:0},400,400),step:10,onAfterChange:function(e){return n({avContactsQuarantine:Math.round(e/10)})},tooltipVisible:!0}))},C=function(e){var t=e.travellers,a=e.handleTravellersChange;return r.a.createElement("div",null,r.a.createElement("h3",null,"Infected Travellers per day:"),r.a.createElement("p",null,"* after quarantine ends"),r.a.createElement(g.a,{defaultValue:100*t,min:0,max:1e3,step:100,marks:Object(m.a)({0:0},1e3,1e3),onAfterChange:function(e){return a(Math.round(e/100))},tooltipVisible:!0}))},x=function(e){var t=e.simulationData,a=e.setSimulationData,n=e.update;return r.a.createElement("div",{style:{width:"100%",padding:"0 30px"}},r.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("h2",null,"Controls"),r.a.createElement(b,{update:n})),r.a.createElement(p,{hospitalBeds:t.hospitalBeds,handleHospitalsChange:function(e){return a(Object(d.a)({},t,{hospitalBeds:e}))}}),r.a.createElement(h.a,null),r.a.createElement(C,{handleTravellersChange:function(e){return a(Object(d.a)({},t,{travellers:e}))},travellers:t.travellers}),r.a.createElement(h.a,null),r.a.createElement(y,{handleDaysChange:function(e){return a(Object(d.a)({},t,{days:e}))},days:t.days}),r.a.createElement(h.a,null),r.a.createElement(E,{handleContactsChange:function(e){return a(Object(d.a)({},t,{socialContacts:e}))},contacts:t.socialContacts}),r.a.createElement(h.a,null),r.a.createElement(v,{population:t.infectedPopulation,handlePopulationChange:function(e,n){var i=Object(f.a)(t.infectedPopulation);i[e]=n,a(Object(d.a)({},t,{infectedPopulation:i}))}}))},D=a(51),k=a(256),O=function e(t){var a=this;Object(D.a)(this,e),this.id=void 0,this.age=void 0,this.immune=!1,this.infected=!1,this.hospitalized=!1,this.severeNotHospitalized=!1,this.infectionDay=0,this.infectionSpread=0,this.currentStageDay=0,this.infectionsStage=n.healthy,this.nextStage=n.incubation,this.history=new Map,this.nextDay=function(){a.infected&&(a.infectionDay++,a.currentStageDay++)},this.setStage=function(e){a.history.set(a.infectionsStage,a.currentStageDay),a.currentStageDay=0,a.infectionsStage=e},this.heal=function(){a.setStage(n.healed),a.immune=!0,a.infected=!1,a.hospitalized=!1},this.infect=function(){a.immune||a.infected||(a.infected=!0,a.infectionsStage=n.incubation,a.nextStage=n.mild,a.infectionDay=0,a.currentStageDay=0)},this.id=k.a(),this.age=t.age,Object.assign(this,t),this.infected&&this.infectionsStage===n.healthy&&(this.infectionsStage=n.incubation),this.infectionsStage===n.incubation&&(this.nextStage=n.mild)},j=a(133);function M(e,t){var a=1.05*e;return t<a?Math.exp(t-a):1}function w(e){return Math.random()<e}function A(e,t){for(var a=new Set;a.size<t;)a.add(Math.floor(Math.random()*e.length));return Object(f.a)(a).map((function(t){return e[t]}))}var T=function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I;Object(D.a)(this,e),this.characteristics=void 0,this.transmissionChance=function(){return t.characteristics.transmissionChance},this.severeStateChance=function(e){return e.infected&&e.infectionsStage===n.mild&&e.nextStage===n.severe?M(t.characteristics.averageMildToSevereDays,e.currentStageDay):0},this.deathChance=function(e){return e.infected&&e.infectionsStage===n.severe&&e.nextStage===n.death?M(t.characteristics.averageSevereToDeathDays,e.currentStageDay):0},this.recoverChance=function(e){return e.infected?e.infectionsStage===n.incubation?0:e.infectionsStage===n.mild?e.nextStage===n.healed?M(t.characteristics.averageMildToHealDays,e.currentStageDay):0:e.infectionsStage===n.severe?e.nextStage===n.healed?M(t.characteristics.averageSevereToHealDays,e.currentStageDay):0:1:1},this.symptomsStartChance=function(e){return e.infected&&e.infectionsStage===n.incubation?M(t.characteristics.averageIncubationDays,e.infectionDay):0},this.getNextStage=function(e){return e.infectionsStage===n.incubation?n.mild:e.infectionsStage===n.mild?w(t.characteristics.ageSevereChance[Math.floor(e.age/10)])?n.severe:n.healed:e.infectionsStage===n.severe?w((e.hospitalized?t.characteristics.ageDeathChance.hospitalized:t.characteristics.ageDeathChance.home)[Math.floor(e.age/10)])?n.death:n.healed:n.death},this.characteristics=a},I={transmissionChance:.006,averageIncubationDays:10,averageMildToHealDays:14,averageMildToSevereDays:7,averageSevereToHealDays:21,averageSevereToDeathDays:5,ageSevereChance:[0,.01,.01,.01,.02,.06,.14,.27,.39,.6],ageDeathChance:{hospitalized:[.2,.2,.2,.2,.2,.23,.26,.29,.38,.7],home:[.1,.3,.3,.3,.4,.45,.5,.6,.8,.99]}},z={avContactsGeneral:20,avContactsQuarantine:1,quarantineTime:60,quarantineAge:0},V=function(){function e(){var t=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new T,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;Object(D.a)(this,e),this.hospitalBeds=0,this.population=void 0,this.virus=void 0,this.day=0,this.socialContacts=z,this.travellersPerDay=void 0,this.nextDay=function(){t.day++,t.incomingTravellers(),t.progressInfection(),t.progressSpread()},this.incomingTravellers=function(){var e;if(!(t.day<=t.socialContacts.quarantineTime)){var a=Array(t.travellersPerDay).fill(35).map((function(e){return new O({age:e,infected:!0})}));(e=t.population).push.apply(e,Object(f.a)(a))}},this.run=function(e){for(var a=[],i=0;i<e;i++){t.nextDay();for(var r=0,l=0,o=0,c=0,s=0,h=0;h<t.population.length;h++)switch(t.population[h].infectionsStage){case n.incubation:r++;break;case n.mild:l++;break;case n.severe:o++;break;case n.death:c++;break;case n.healed:s++}a.push({total:t.population.length,incubation:r,mild:l,severe:o,death:c,healed:s,hospitalBeds:t.hospitalBeds})}return a},this.population=a,this.virus=i,this.hospitalBeds=r,this.socialContacts=l,this.travellersPerDay=o}return Object(j.a)(e,[{key:"progressInfection",value:function(){for(var e=this.population.filter((function(e){return e.hospitalized})).length,t=0;t<this.population.length;t++){var a=this.population[t];if(a.infected)switch(a.nextDay(),a.infectionsStage){case n.incubation:w(this.virus.symptomsStartChance(a))&&(a.setStage(n.mild),a.nextStage=this.virus.getNextStage(a));break;case n.mild:var i=this.virus.severeStateChance(a),r=this.virus.recoverChance(a);w(i)?(a.setStage(n.severe),e<this.hospitalBeds?(a.hospitalized=!0,e++):a.severeNotHospitalized=!0,a.nextStage=this.virus.getNextStage(a)):w(r)&&a.heal();break;case n.severe:var l=this.virus.deathChance(a),o=this.virus.recoverChance(a);w(l)?(a.setStage(n.death),a.hospitalized=!1):w(o)&&a.heal()}}}},{key:"progressSpread",value:function(){for(var e=this,t=this.socialContacts,a=t.quarantineAge,i=t.avContactsGeneral,r=t.avContactsQuarantine,l=t.quarantineTime,o=this.population.filter((function(e){return e.infectionsStage!==n.death})),c=function(t){var n=e.population[t],c=e.day<l&&n.age>=a?r:i;A(o,c).forEach((function(t){t.infected&&w(e.virus.transmissionChance())&&(t.infectionSpread++,n.infect())}))},s=0;s<this.population.length;s++)c(s)}}]),e}(),q={position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0,0,0,0.5)",zIndex:999},H=function(e){return e.active?r.a.createElement("div",{style:q},r.a.createElement("h2",{style:{color:"#fff"}},"Running Simulation, it can take a while...")):null},B={infectedPopulation:[4333,3982,5086,6922,5977,5854,5182,2857,1e3,787],hospitalBeds:50,travellers:1,days:365,socialContacts:{avContactsQuarantine:1,avContactsGeneral:20,quarantineAge:50,quarantineTime:90}},F=function(){var e=Object(i.useState)(!0),t=Object(c.a)(e,2),a=t[0],n=t[1],l=Object(i.useState)(B),o=Object(c.a)(l,2),s=o[0],h=o[1],d=Object(i.useRef)(s),f=Object(i.useState)(null),m=Object(c.a)(f,2),g=m[0],v=m[1],p=Object(i.useState)(null),y=Object(c.a)(p,2),S=y[0],b=y[1];return Object(i.useLayoutEffect)((function(){a&&setTimeout((function(){var e=s.infectedPopulation.flatMap((function(e,t){return Array(e).fill(10*t+5).map((function(e){return new O({age:e})}))}));A(e,100).forEach((function(e){return e.infect()}));var t=new V(e,new T,s.hospitalBeds,s.socialContacts,s.travellers);window.simulation=t;var a=t.run(s.days),i={general:R(t.population),byAge:Array(10).fill(0).map((function(e,a){return R(t.population.filter((function(e){return e.age>=10*a&&e.age<10*(a+1)})))}))};n(!1),v(a),b(i),d.current=s}))}),[a]),r.a.createElement("div",null,r.a.createElement(H,{active:a}),r.a.createElement("h1",null,"Naive Infection Distribution"),r.a.createElement("div",{style:{display:"flex"}},g&&S&&r.a.createElement(u,{data:g,totals:S,quarantineTime:s.socialContacts.quarantineTime}),r.a.createElement(x,{update:function(){return n(!0)},simulationData:s,setSimulationData:h})))};function R(e){var t=e.filter((function(e){return e.infectionsStage!==n.healthy}));return{total:e.length,dead:e.filter((function(e){return e.infectionsStage===n.death})).length,infected:t.length,healed:e.filter((function(e){return e.infectionsStage===n.healed})).length,onlyMildSymptoms:t.filter((function(e){return e.history.has(n.incubation)&&!e.history.get(n.severe)})).length,hadSevereSymptoms:t.filter((function(e){return e.history.has(n.severe)||e.infectionsStage===n.severe})).length,severeNotHospitalized:t.filter((function(e){return e.severeNotHospitalized})).length,R0:t.reduce((function(e,t){return e+t.infectionSpread}),0)/t.length}}var N=function(){return r.a.createElement("div",null,r.a.createElement(F,null))};a(250);o.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[136,1,2]]]);
//# sourceMappingURL=main.6ac76495.chunk.js.map